# ─── Sellio Metrics — Cloudflare Worker Config ───────────────
#
# Deploys the Fastify backend as a Cloudflare Worker.
# Uses nodejs_compat for Octokit, Awilix, and Pino support.
#
# Secrets (set via dashboard or `wrangler secret put`):
#   APP_ID, INSTALLATION_ID, APP_PRIVATE_KEY

name = "sellio-metrics"
main = "src/worker.ts"
compatibility_date = "2024-09-23"
compatibility_flags = ["nodejs_compat"]

[vars]
GITHUB_ORG = "Sellio-Squad"
LOG_LEVEL = "info"
NODE_ENV = "production"

# Workers KV for caching (replaces Redis)
# After first deploy, create the namespace via:
#   npx wrangler kv namespace create CACHE
# Then paste the generated id below.
[[kv_namespaces]]
binding = "CACHE"
id = "4670f71d4e744e9f83da2e785aaba700"
